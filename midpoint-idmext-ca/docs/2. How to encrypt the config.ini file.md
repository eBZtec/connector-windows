# How to Encrypt the config.ini File

# The certification authority uses an encrypted "config.ini" file to connect to PostgreSQL. This code does the encryption and generates the necessary files.

1. **Generate and Save the Key (do this once and keep it secure):**

    ## Python
    ```
    from cryptography.fernet import Fernet

    key = Fernet.generate_key()

    with open('secret.key', 'wb') as key_file:
        key_file.write(key)

    with open('config.ini', 'rb') as file:
        file_data = file.read()

    fernet = Fernet(key)
    encrypted_data = fernet.encrypt(file_data)

    with open('encrypted_config.ini', 'wb') as encrypted_file:
        encrypted_file.write(encrypted_data)
    ```

2. **Delete the config.ini File and Manage Permissions:**

    ## Bash:
    ```
    #!/bin/bash

    # Delete the original file
    rm config.ini

    # Set restricted permissions on files
    chmod 400 encrypted_config.ini
    chmod 400 secret.key
    ```

    Verifying permissions:

    ```
    ls -l secret.key
    ```
